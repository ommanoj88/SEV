# Deep Dive: Maintenance Scheduling Analysis

**Date:** 2025-11-19
**Feature:** Maintenance Scheduling
**Status:** ⚠️ **Basic CRUD / Manual Only**

This report analyzes the implementation of Maintenance Scheduling.

## 1. Executive Summary
The Maintenance Scheduling feature allows users to manually create and track maintenance records. However, it **lacks automation**: there are no recurring schedules (e.g., "Every 5000km"), no odometer-based triggers, and no automated alerts. It is a digital logbook, not a fleet management system.

## 2. Backend Analysis (`MaintenanceService`, `MaintenanceRecord`)
**Status:** ⚠️ **Manual & Reactive**

*   **Data Model:**
    *   `MaintenanceRecord` stores `scheduledDate`, `type`, `status`, `cost`.
    *   **Missing:** `recurrenceInterval` (e.g., Monthly, Yearly), `mileageInterval` (e.g., every 10k km).
*   **Business Logic:**
    *   `createMaintenanceRecord`: Simple INSERT. No logic to calculate next service date.
    *   `completeMaintenance`: Sets status to COMPLETED. Does **not** schedule the next routine service automatically.
    *   **Integration Gap:** No link to `Vehicle.totalDistance`. The system cannot say "Vehicle X is due for service because it drove 1000km".

## 3. Frontend Analysis (`MaintenanceSchedule.tsx`)
**Status:** ✅ **Functional UI**

*   **Features:**
    *   Calendar view of upcoming maintenance.
    *   Forms to add/edit records.
*   **Limitations:**
    *   User must manually calculate when the next service is due.

## 4. Impact
*   **Missed Services:** Without mileage tracking, high-usage vehicles will miss maintenance intervals.
*   **Administrative Burden:** Fleet managers must manually check odometers and create records.
*   **Compliance Risk:** Failure to maintain safety-critical components (brakes, tires) due to lack of alerts.

## 5. Recommendations

### 1. Implement Preventive Maintenance
*   Create `MaintenancePolicy` entity (e.g., "Oil Change every 10,000km").
*   Link `MaintenancePolicy` to `VehicleType`.

### 2. Automate Scheduling
*   Listen to `TripCompletedEvent`.
*   Check `vehicle.totalDistance` against `MaintenancePolicy`.
*   Automatically create `MaintenanceRecord` (Status: DUE) when threshold is reached.

### 3. Add Recurring Schedules
*   Add `recurrence` field to `MaintenanceRecord` (Daily, Weekly, Monthly).
*   Background job to generate future records.

## Summary
The current system is a "Digital Notebook" for maintenance. It needs to become an "Intelligent Assistant" that tells the manager when service is needed.
